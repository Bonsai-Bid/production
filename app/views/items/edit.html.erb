<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Item</title>
    <%= vite_client_tag %>
    <%= vite_javascript_tag 'application' %>
    <%= vite_stylesheet_tag 'application' %>
</head>

<body class="bg-gray-100 text-gray-900 font-sans leading-normal tracking-normal">
    <div class="container mx-auto mt-5 px-4">
        <%= form_with(model: @item, data: { controller: "category-visibility" }) do |form| %>
            <div class="mb-4">
                <%= form.label :category_type, 'Category', class: 'block text-sm font-medium text-gray-700' %>
                <%= form.select :category_type, 
                               options_for_select(Item.category_types.keys, @item.category_type), 
                               { include_blank: true }, 
                               { 
                                 data: { 
                                   category_visibility_target: "category",
                                   action: "change->category-visibility#updateVisibility"
                                 }
                               } %>
            </div>

            <div data-category-visibility-target="plant" class="hidden">
                <%= render 'items/plant_fields', form: form %>
            </div>

            <div data-category-visibility-target="container" class="hidden">
                <%= render 'items/container_fields', form: form %>
            </div>

            <div data-category-visibility-target="essential" class="hidden">
                <%= render 'items/essential_fields', form: form %>
            </div>

            <%= render 'items/auction_fields', form: form %>
        <% end %>
    </div>
</body>
</html>
